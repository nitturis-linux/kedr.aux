   Соглашения по путям, где будут лежать те или иные файлы в установленной системе.

I.Общие соглашения:

$prefix - префикс установки, заданный при конфигурации пакета.

В зависимости от префикса установки, будем различать глобальную и локальную установки:
-глобальная - если префикс начинается на "/usr", "/opt", или префикс в точности равен "/".
-локальная - все другие значения префикса

Главное свойство локальной установки - все файлы, за исключением временных в рамках одной сессии операционной системы, лежат в поддиректориях от префикса.

В глобальной установке выделяется установка в поддиректорию "/opt", на такую установку в дальнейшем будем ссылатся как на "opt-установку".

В качестве имени системы выбрано kedr.

II.Расположение основных типов файлов:

1. Исполняемые файлы(executables)
a) предназначенные для прямого вызова пользователем: $prefix/bin/
b) не предназначенные для прямого вызова пользователем(например, используются в других исполняемых файлах): $prefix/lib/kedr/
(да, случае b, именно поддиректория lib, а не bin)

2. Неизменяемые(в течении всего времени жизни установленной системы) файлы: a)$prefix/share/kedr/ и ее поддиректории
b) для страничек документации(man pages): $prefix/share/man/manN/

3. Файлы глобальной конфигурации системы:
a) глобальная установка: /etc/kedr/
b) локальная установка: $prefix/etc/
и их поддиректории

4. Файлы библиотек( .so-файлы)
a) предназначенные для прямого использования(напр. ,линковка с этими библиотеками) пользователем: $prefix/lib/
b) не предназначенные для прямого использования пользователем(например, для линковки только программ, предоставляемых системой): $prefix/lib/kedr/

5. Включаемые файлы(.h-файлы) $prefix/include/kedr/ и поддиректории

6. Временные файлы, используемые в рамках одной сессии операционной системы:
/tmp/kedr/
и ее поддиректории
(даже в случае локальной установки)

7. Временные файлы, сохраняющиеся даже после завершения работы системы
a) локальная установка: : $prefix/var/tmp/
b) глобальная установка: /var/tmp/kedr/
и их поддиректории

8. Файлы состояния системы, сохраняющиеся даже после завершения работы операционной системы:
a) локальная установка: $prefix/var/lib/
b) глобальная не opt-установка: /var/lib/kedr/
c) opt-установка: /var/opt/kedr/lib/
и их поддиректории

9. Файлы кэша(похоже на временные файлы, сохраняющиеся даже после завершения работы операционной системы, но используются именно как кэш)
a) локальная установка: $prefix/var/cache/
b) глобальная не opt-установка: /var/cache/kedr/
c) opt-установка: /var/opt/kedr/cache/
и их поддиректории

10. Остальные изменяемые файлы:

a) локальная установка: $prefix/var/
b) глобальная не opt-установка: /var/kedr/
c) opt-установка: /var/opt/kedr/
и их поддиректории

Все файлы, которые при установке(хотя бы одного из вариантов) попадают в директорию, в имени которой нет имени пакета(kedr), должны иметь уникальное в операционной системе имя. При локальной и opt-установке считается, что $prefix сам содержит имя пакета.

Типы уникальных файлов:
1)Исполняемые файлы, предназначенные для прямого вызова пользователем
2)Библиотеки, предназначенные для прямого использования пользователем
3)man-странички

III. Расположение дополнительных типов файлов(сведение их к основным типам).

1. Модули ядра:
${директория для основных файлов библиотек}/modules/'uname -r'/, в ее поддиректориях.

Пока два варианта поддиректорий - misc и extra.
Первый вариант подходит по духу функциональности модулей, второй - означает, что модули внешние по отношению к ядру, не включены в ядро(см. документацию ядра по kernel build system).

2. Symvers-файлы для модулей ядра:
${директория для основных файлов библиотек}/modules/'uname -r'/,
в поддиректорию symvers
Module.symvers должен быть переименован в ${module_name}.symvers при установке.

3. Включаемые файлы для модулей ядра="включаемые файлы".

4. Примеры, предназначенные для пользователя:
исходные файлы таких примеров с правилами их сборки(makefile) в
${неизменяемые файлы}/examples/ и ее поддиректории.

Предполагается, что для сборки примеров эти файлы будут скопированы в другую директорию(в которую пользователю разрешена запись), и сборка будет производится там. Поэтому, правила сборки должны быть перемещаемыми.