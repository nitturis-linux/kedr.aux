   Соглашения по путям, где будут лежать те или иные файлы в установленной системе.
   
Документы, на которых основываются соглашения:
1. Filesystem Hierarchy Standard 2.3, http://www.pathname.com/fhs/pub/fhs-2.3.html
    (далее - FHS 2.3)
2. Filesystem Hierarchy Standard 3.0 Draft 1, http://www.linuxbase.org/betaspecs/fhs/fhs.html
    (далее - FHS 3.0)
3. GNU Conding Standards, http://www.gnu.org/prep/standards/html_node/Directory-Variables.html
    (далее "GNU CS" ссылается на раздел 7.2.5 Variables for installation directories)

NOTE: GNU CS реализован в модуле GNUInstallDirs.cmake (начиная с 2.8 версии).

NOTE: GNU CS использует отличную от FHS схему взаимодействия программ.
    Ниже используется FHS схема, поэтому соглашения, по большей части, противоречат GNU CS.

NOTE: FHS 3.0 полноценно описывает иерархию /usr/local.
    В соглашениях ниже эта иерархия не выделяется.


I.Общие соглашения:

$prefix - префикс установки, заданный при конфигурации пакета.

В зависимости от префикса установки, будем различать глобальную и локальную установки:
-глобальная - если префикс начинается на "/usr", "/opt", или префикс в точности равен "/".
-локальная - все другие значения префикса

Главное свойство локальной установки - все файлы, за исключением временных в рамках одной сессии операционной системы, лежат в поддиректориях от префикса. Это позволяет иметь несколько таких установок в одной системе.

В системе должно быть не больше одной глобальной установки, вне зависимости от префикса.

В глобальной установке выделяется установка в поддиректорию "/opt", на такую установку в дальнейшем будем ссылатся как на "opt-установку".

В качестве имени системы выбрано kedr.

II.Расположение основных типов файлов:

1. Исполняемые файлы(executables), предназначенные для прямого вызова пользователем:
a) глобальная установка в opt: /opt/kedr/bin
    FHS 2.3, /opt
б) глобальная установка не в opt: $prefix/bin/
    FHS 2.3, /usr/bin
в) локальная установка: $prefix/bin/

2. Исполняемые файлы(executables), не предназначенные для прямого вызова пользователем(например, используются в других исполняемых файлах):
любая установка: $prefix/lib/kedr/
    FHS 2.3, /usr/lib
    FHS 3.0 поддерживает также /usr/libexec, GNU SC использует <prefix>/libexec
    для opt-установки противоречит FHS 2.3, /opt/lib

3. Неизменяемые(в течении всего времени жизни установленной системы) файлы:
любая установка: $prefix/share/kedr/ и ее поддиректории
    FHS 2.3, /usr/share
    FHS 2.3 не выделяет директорию /opt/share, для opt-установки лучше подходит /opt/kedr/share

4. Страницы документации(man pages):
любая установка: $prefix/share/man/manN/
    FHS 2.3, /usr/share/man
    для opt-установки противоречит FHS 2.3, /opt/<package>/share/man

5. Файлы глобальной конфигурации системы:
а) глобальная установка в opt: /etc/opt/kedr/
    FHS 2.3, /etc/opt
б) глобальная установка не в opt: /etc/kedr/
    FHS 2.3, /etc
в) локальная установка: $prefix/etc/kedr/
и их поддиректории

6. Файлы библиотек( .so-файлы), предназначенные для прямого использования(напр. ,линковка с этими библиотеками) пользователем:
любой префикс: $prefix/lib/
    FHS 2.3, /usr/lib
    для opt-установки противоречит FHS 2.3, /opt/lib
    
7. Файлы библиотек( .so-файлы), не предназначенные для прямого использования пользователем(например, для линковки только программ, предоставляемых системой):
любая установка: $prefix/lib/kedr/
    FHS 2.3, /usr/lib
    для opt-установки противоречит FHS 2.3, /opt/lib

8. Включаемые файлы(.h-файлы):
любая установка: $prefix/include/kedr/ и поддиректории
    FHS 2.3, /usr/include
    для opt-установки противоречит FHS 2.3, /opt/include

9. Временные файлы, используемые в рамках одной сессии операционной системы:
любая установка: /tmp/kedr/
и ее поддиректории
(даже в случае локальной установки)
    FHS 2.3 описывает /tmp как содержащую файлы в пределах вызова команды.

10. Временные файлы, сохраняющиеся даже после завершения работы системы
а) глобальная установка: /var/tmp/kedr/
    FHS 2.3, /var/tmp
б) локальная установка: $prefix/var/tmp/kedr/

и их поддиректории

11. Файлы состояния системы, сохраняющиеся даже после завершения работы операционной системы:
а) opt-установка: /var/opt/kedr/lib/kedr/
    FHS 2.3, /var/opt
б) глобальная не opt-установка: /var/lib/kedr/
    FHS 2.3, /var/lib
в) локальная установка: $prefix/var/lib/kedr/
и их поддиректории

12. Файлы кэша(похоже на временные файлы, сохраняющиеся даже после завершения работы операционной системы, но используются именно как кэш)
а) opt-установка: /var/opt/kedr/cache/kedr/
    FHS 2.3, /var/opt
б) глобальная не opt-установка: /var/cache/kedr/
    FHS 2.3, /var/cache
в) локальная установка: $prefix/var/cache/kedr/

и их поддиректории

13. Остальные изменяемые файлы:
а) глобальная установка: /var/opt/kedr/
    opt-установка - FHS 2.3 /var/opt
    Согласно FHS 2.3 в /var нельзя создавать новые поддиректории, поэтому используем префикс для opt-установки
б) локальная установка: $prefix/var/kedr/

и их поддиректории

14. Файлы документации:
$prefix/share/doc/kedr/
конкретная поддиректория не уточняется.
    FHS 2.3, /usr/share/doc

    
Все файлы, которые при установке(хотя бы одного из вариантов) попадают в директорию, в имени которой нет имени пакета(kedr), должны иметь уникальное в операционной системе имя. При локальной и opt-установке считается, что $prefix сам содержит имя пакета.


Типы уникальных файлов:
1)Исполняемые файлы, предназначенные для прямого вызова пользователем
2)Библиотеки, предназначенные для прямого использования пользователем
3)man-странички

III. Расположение дополнительных типов файлов(сведение их к основным типам).

1. Модули ядра:
а) глобальная установка: /lib/modules/'uname -r'/extra
б) локальная установка: $prefix/lib/modules/'uname -r'/extra

2. Symvers-файлы для модулей ядра:
$prefix/lib/modules/'uname -r'/symvers,

Module.symvers должен быть переименован в ${module_name}.symvers при установке.

3. Включаемые файлы для модулей ядра="включаемые файлы".
    FHS 2.3 описывает содержимое /usr/include как "general-use include files for the C programming language"
    хотя язык модулей ядра тоже C, но на general-use не тянут.
    В будущем, возможно, найдется более подходящее место.

4. Примеры, предназначенные для пользователя:
исходные файлы таких примеров с правилами их сборки(makefile) в
${неизменяемые файлы}/examples/ и ее поддиректории.

Предполагается, что для сборки примеров эти файлы будут скопированы в другую директорию(в которую пользователю разрешена запись), и сборка будет производится там. Поэтому, правила сборки должны быть перемещаемыми.

5. Шаблоны, используемые шаблонным генератором:
${неизменяемые файлы}/templates/