Пример шаблонов для генерации 'functions_support.c' в KEDR
Также приведен пример yaml-файла с данными для такой генерации.


                    Использование

jinja2-yaml payload.yaml templates/


                    Примечания

1. Имена всех параметров-последовательностей имеют множественную форму:
functions, headers, functions.args. В шаблонах используются итерации типа
<$for function in functions$>.

2. payload.yaml на самом деле содержит 3 YAML документа:
- пример из KEDR examples/custom_payload_fsim.
- две несуществующих функции, одна из которых не принимает параметров,
  а другая не возвращает значение (для проверки корректности шаблонов при
  отсутствующих 'args' или 'returnType').
- группа функций KEDR functions/kasptinf (для проверки корректности
  шаблонов при работе с функциями с переменным числом параметров или с
  параметром типа va_list).

3. Для функции kasprintf значение переменной 'original_code' сделано
многострочным, чтобы показать как ее значение будет выводится с учетом
отступов в блоке кода.

4. Используя только предопределенные сущности Jinja2 нельзя проверить, что
хотя бы один элемент в заданной последовательности имеет заданный аттрибут.
Поэтому включение файла <stdarg.h> выполняется для каждой функции,
принимающей переменное число аргументов в шаблоне 'block', а не единожды
в шаблоне 'document', как это сделано в текущих шаблонах KEDR.

В данном конкретном случае это некритично (функций с переменным числом
параметров не так много, а повторяющиеся включения одного и того же файла
ошибкой не являются).
Если такого рода проверки будут реально необходимы, есть смысл разработать
для них специальную функцию или другой элемент Jinja2.