Реализация подсистемы выделения памяти для отслеживания корректности работы модуля с выделенной памятью.

Планируется контроль корректности следующих сценариев использования памяти:

1) Доступ осуществляется ровно к той памяти, которая была выделена модулю, выхода за границы выделенной памяти не должно быть(даже чтение).

схема реализации: выделенный блок памяти выравнивается по правому концу на границе страницы памяти, следующая страница делается недоступной. При попытке доступа за границу выделенной памяти будет page fault.

2) Если выделяется неинициализированная память, то первой операцией доступа к ней должна быть запись, а не чтение.

схема реализации: выделенный блок памяти заполняется некоторым паттерном.
Есть вероятность, что при чтении неинициализированной области будет возвращено нечто, что не ожидается модулем, а следовательно, откроется ошибка.

3) Не должно быть доступа к выделенной памяти после освобождения.

схема реализации: память освобождается не сразу, а только через некоторое время. При этом весь выделенный участок памяти помечается как недоступный. При попытке доступа будет page fault. Промежуток времени может основыватся на таймере, или на количестве других операций работы с памятью.


Подсистема выделения памяти выполнена в отдельном source-файле. Для использования этой подсистемы в payload'е, payload должен использовать эту подсистему через определенный API.

current: Реализовано не до конца.