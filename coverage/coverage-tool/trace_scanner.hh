/* 
 * Scanner for lexems appears in the trace, generated by lcov.
 * 
 * Used by the parser.
 */

#ifndef TRACE_SCANNER_H_INCLUDED
#define TRACE_SCANNER_H_INCLUDED

#include "trace_parser_base.tab.hh"

#include "location.hh"
#include <string>

class TraceScanner
{
public:
	TraceScanner();
	~TraceScanner();
	/* Set stream for scan it as a trace */
	void setStream(std::istream& is);
	
	int yylex(yy::parser::semantic_type* yylval, yy::location* yylloc);
private:
	/* Not copiable and assignable*/
	TraceScanner(const TraceScanner& scanner);
	TraceScanner& operator =(const TraceScanner& scanner);

	/* Real type is yyscan_t */
	void* _scanner;
};

/* 
 * Report about error while parsing trace.
 * 
 * This function is used in parser and scanner.
 */

void trace_parse_error(const yy::location& yyloc,
    const std::string& what);


#endif /* TRACE_SCANNER_H_INCLUDED */